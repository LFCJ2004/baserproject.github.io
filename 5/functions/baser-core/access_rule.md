# アクセスルール

アクセスルールとは、管理画面や Web API、フロントページ、独自で開発するマイページなど、各領域に対して、URLとHTTPメソッドベースでアクセスの可否を設定できる機能です。

## 領域について
アクセス設定の対象となる領域は、プレフィックスとして定義します。
詳細については [プレフィックス認証](../plugin/prefix_auth) をご覧ください。

- Admin: 管理画面
- Api: Web API
- Front: フロントページ
- Mypage: マイページ（プレフィックス例のため、baserCMS本体には実装されていません）

## アクセス基本設定
アクセスルールを有効にするには、ユーザーグループに対して「限定アクセス」を設定する必要があります。  
（初期状態で「システム管理」グループ以外は限定アクセスに設定されています。）
  
Web API を有効にしたり、プレフィックス認証を追加した場合には、ユーザーグループの編集画面にて、プレフィックスごとについてアクセス基本設定として、フルアクセスなのか、限定アクセスなのかを設定できます。  

限定アクセスを設定した場合のみ、アクセスルールが有効となります。 
[プレフィックス認証](../plugin/prefix_auth) の設定 により、ホワイトリスト方式かブラックリスト方式を選択する事ができます。

## アクセスルールとアクセスルールグループについて

## アクセスルールの構築と再構築
初期状態のアクセスルールは、baserCMSコアのインストール時、コアプラグインのインストール時、各プラグイン内に設置された、`/config/permission.php` を参照し自動的に構築します。

また、アクセスグループ一覧より、各ユーザーグループごとに、アクセスルールを再構築することもできます。その際、アクセスルールを変更していた場合は初期化されてしまうので注意が必要です。

## アクセスルールの変更
メニュー → ユーザー → アクセスルールグループ より、アクセスルールの変更ができます。  

画面上部のユーザーグループとタイプを選択し、アクションメニューより編集画面に移動します。

編集画面では、アクセスルールグループにぶら下がる、アクセスルールを全て表示し、各ルールの権限とアクセス可否を一括で保存することができます。

また、アクセスルールグループに利用状態を持ち、アクセスルールグループの利用状態が無効の場合は、配下のルールも全て無効の取り扱いとなります。その際、他のユーザーグループにおいても無効となります。

