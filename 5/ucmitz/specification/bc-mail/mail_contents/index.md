# メールコンテンツ設計書

メールフォームの各種設定を行う。  
メールフォームはコンテンツ管理上に複数設置する事ができる。 

## ユースケース図
![ユースケース図：メールコンテンツ](../../../svg/use_case/bc-mail/mail_contents.svg)

　
## 機能
### フロント
#### フロントのメールフォームを表示する
フロントページにおいて、メールフォームを表示する。

### 管理機能
#### 追加
コンテンツ管理より、フォルダを指定して新しいメールフォームを配置する事ができる。


#### 変更
メールフォームの説明文を変更できる他、下記の設定変更ができる。

- **送信先メールアドレス**: メールフォーム送信時にメールを送信する宛先を設定できる。
- **送信先名**:自動返信メールの送信者に表示します。入力がない場合、サイト名が設定されます。<span style="color: red">送信者名に変更</span>
- **自動返信メール件名[ユーザー宛]**: ユーザー宛の自動返信メールの件名を設定できる。
- **自動送信メール件名[管理者宛]**: 管理者宛の自動送信メールの件名を設定できる。
- **リダイレクトURL**: メール送信後、別のURLにリダイレクトする場合にURLを指定します。<span style="color: red">コメントのhttp を https へ</span>
- **フォーム受付期間**: 公開期間とは別にフォームの受付期間を設定する事ができます。受付期間外にはエラーではなく受付期間外のページを表示します。<span style="color: red">受付期間外ページの確認</span>
- **データベース保存**: メールフォームから送信された情報をデータベースに保存するかどうかを指定できます。
- **イメージ認証**: メールフォーム送信の際、表示された画像の文字入力させる事で認証を行ないます。
- **SSL通信**: メールフォームでSSL通信を利用するかどうかを設定できます。<span style="color: red">廃止を検討</span>
- **BCC用送信先メールアドレス**: BCC（ブラインドカーボンコピー）用のメールアドレスを指定します。複数の送信先を指定するには、カンマで区切って入力します。
- **フロントで利用するウィジェットエリア**: フロントで利用するウィジェットエリアを設定できます。<span style="color: red">プラグインの利用状態によって表示を切り替える</span> 
- **フロントで利用するメールフォームテンプレート**: フロントで利用するメールフォームテンプレートを変更できます。 
- **フロントで利用するメールフォームテンプレートの編集画面に遷移する**: メールフォームテンプレートの編集画面へのリンクを表示する。BcThemeFile プラグインがインストールされている場合に有効。<span style="color: red">プラグインの利用状態によって表示を切り替える</span>
- **送信メールテンプレート**: 送信メールテンプレートを変更できます。
- **送信メールテンプレートの編集画面に遷移する**: 送信メールテンプレートの編集画面へのリンクを表示する。BcThemeFile プラグインがインストールされている場合に有効。<span style="color: red">プラグインの利用状態によって表示を切り替える</span>

#### プレビュー
メールフォームのプレビューを行う。

#### 削除
メールフォームを削除する。削除の際、関連するメールフィールドやメールメッセージは全て削除する。

#### コピー
メールフォームをコピーする。コピー元のメールフォームに関連するメールフィールドも同時にコピーする。

　
## ドメインモデル図
![ユースケース図：メールコンテンツ](../../../svg/domain_model/bc-mail/mail_contents.svg)

　
## クラス図
### 管理画面
![ユースケース図：メールコンテンツ](../../../svg/class/bc-mail/manage_mail_contents.svg)

　
### API
![ユースケース図：メールコンテンツ](../../../svg/class/bc-mail/api_mail_contents.svg)
