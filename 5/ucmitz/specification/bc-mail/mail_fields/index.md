# メールフィールド設計書

メールフォームのフィールド管理を行う。

## ユースケース図
![ユースケース図：メールフィールド](../../../svg/use_case/bc-mail/mail_fields.svg)

　
## 管理機能
### 一覧
メールフィールドを一覧で表示する。ページネーションは実装しない。
#### 有効化
メールフィールドを有効化する。
#### 無効化
メールフィールドを無効化する。
#### コピー
メールフィールドをコピーする。コピーの際、メッセージテーブルのフィールドも追加する。
#### 削除
メールフィールドを削除する。削除の際、メッセージテーブルのフィールドも削除する。
#### 並べ替え
メールフィールドの表示順を並べ替える。
#### 一括処理
一括処理として次の機能を提供する。
- 削除
- 有効化
- 無効化

### 新規追加
新しいメールフィールドを追加する。追加の際、メッセージテーブルのフィールドも追加する。

### 編集
既存のメールフィールドの設定を編集する。編集の際、フィールド名が変更となった場合は、メッセージテーブルのフィールド名も変更する。

## ucmitzにおける変更点
### separator フィールド を delimiter に変更
separator が、MySQLの予約語で、バッククォートでエスケープしないとSQLでエラーとなるが、CakePHPの生成する INSERT 文において、プレースホルダーを利用する前提で、バッククォートを付けなくなったため、エラーとなりデータがの追加ができなくなった。そのためリネームした。

### rows フィールド を text_rows に変更
separator と同様の理由でリネーム。
　
## ドメインモデル図
![ユースケース図：メールフィールド](../../../svg/domain_model/bc-mail/mail_fields.svg)

　
## クラス図
### 管理画面
![ユースケース図：メールフィールド](../../../svg/class/bc-mail/manage_mail_fields.svg)

　
### API
![ユースケース図：メールフィールド](../../../svg/class/bc-mail/api_mail_fields.svg)
