# サイト基本設定 設計書

サイト全体の設定を行う。

## ユースケース図
![ユースケース図：サイト基本設定画面](../../svg/use_case/site_configs.svg)

　
## 機能

### 基本項目
#### 管理者メールアドレスを設定する
システム内でメールを送信する際のデフォルトのメールアドレスを設定する。
#### WebサイトのURLを設定する
フロントエンド側の HTTP と HTTPS のURLを設定する。  
管理画面で変更する場合は、`/config/.env` に書込み権限が必要。
#### 公開状態を切り替える
フロントエンドにアクセスされた際、強制的にメンテナンス画面を表示するかどうか設定する。
#### 制作・開発モードを切り替える
ノーマルモードかデバッグモードかを切り替える。デバッグモードの場合は、エラー発生時にエラー情報が表示されなくなる。  
管理画面で変更する場合は、`/config/.env` に書込み権限が必要。

　
### 管理画面設定
#### 管理画面のSSLを設定する
管理画面を利用する際にSSLを強制的に利用するかどうかを設定する。  
管理画面で変更する場合は、`/config/.env` に書込み権限が必要。
#### 管理画面のテーマを切り替える
管理画面のデザインテーマを切り替える。  
プラグインの config.php の `type` に `AdminTheme` と設定されているものから選択できる。
#### 管理画面の一覧の初期表示件数を切り替える
管理画面で利用する各種一覧ページにて最初に表示する件数を設定する。  
表示件数は各一覧の実装によって変更が可能な場合がある。
#### ログインページのクレジット表示を設定する
ログインページにて表示するクレジット表示を表示するかしないか設定できる。
#### 管理画面のサイドバーのバナー表示を設定する
管理画面のサイドバーに表示するバナーを表示するかしないか設定できる。

　
### サイト設定
#### デバイス・言語設定を切り替える
サイト管理において、各サイトのデバイス設定と言語設定を利用できるかどうかを設定する。

　
### エディタ設定
#### 編集画面で利用するエディタのタイプを切り替える
固定ページ等の編集画面で利用するエディタのタイプを変更する。    
デフォルトでは、なしとCKEditorから選べる。  
プラグインで選択肢を増やす事ができる。
#### エディタの改行モードを切り替える
CKEditor を利用する場合に、改行モードを設定する。
#### エディタのスタイルセットを設定する
CKEditor を利用する場合に、CKEditorのスタイルを設定できる。

　
### メール設定
#### メールの送信文字コードを設定する
メール送信時の送信文字コードを設定できる。  
デフォルトは、UTF-8とISO-2022-JPから選択できる。
#### メール送信時のSMTP情報を設定する
メール送信時に外部メールサーバーを利用の認証情報を設定することができる。  
設定しない場合は、PHPのmail関数を利用する。
#### メール送信時の additional_parameters を設定する
メール送信時のオプションを設定することができる。主に、「return-path」の設定に利用する。
#### メールの送信テストを行う
上記設定を元にメール送信のテストを行う事ができる。

　
## ucmitzにおける仕様変更

baserCMS４までは、メインサイトのSEO情報などをサイト基本設定で行っていたが、メインサイトの設定がサイト管理に移行となった。
### 変更：廃止項目
- 変更：Webサイト名 → サイト管理に移行
- 変更：SEO情報（タイトルタグ、メタディスクリプション、メタキワード） → サイト管理に移行
- 変更：ウィジェットエリア切り替えは、BcWidgetArea プラグインへ移行
- 廃止：GoogleMaps住所、GoogleMaps APIキー
- 廃止：GoogleAnalyticsトラッキングID、ユニバーサルアナリティクス利用設定
- 変更：メインサイトの表示名称 → サイト管理に移行

　
## ドメインモデル図

### サイト基本設定
![ドメインモデル図：サイト基本設定画面](../../svg/domain_model/manage_site_configs.svg)

### データの保存形式
データの保存については、各設定項目ごとにフィールドを定義するでなく、設定項目の可変がしやすいよう、`BcKeyValueBehavior` を利用して設定名と値の組み合わせで保存する。

　
## クラス図
### サイト基本設定
![クラス図：サイト基本設定画面](../../svg/class/manage_site_configs.svg)

　

