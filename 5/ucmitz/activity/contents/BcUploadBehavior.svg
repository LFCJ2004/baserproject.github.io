<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1398px" preserveAspectRatio="none" style="width:916px;height:1398px;background:#FFFFFF;" version="1.1" viewBox="0 0 916 1398" width="916px" zoomAndPan="magnify"><defs><filter height="300%" id="fim86vsywylfz" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="444" cy="20" fill="#000000" filter="url(#fim86vsywylfz)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="69" x="409.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="419.5" y="71.1387">initialize</text><line style="stroke:#A80036;stroke-width:1.5;" x1="80.5" x2="806.5" y1="103.9688" y2="103.9688"/><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="139" x="11" y="713.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="119" x="21" y="735.0762">getExistsCheckDirs</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="88" x="36.5" y="782.9063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="68" x="46.5" y="804.0449">getSaveDir</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="110" x="366" y="123.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="376" y="145.1074">beforeMarshal</text><line style="stroke:#A80036;stroke-width:1.5;" x1="242" x2="513.5" y1="177.9375" y2="177.9375"/><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="131" x="176.5" y="749.1719"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111" x="186.5" y="770.3105">setUpRquestData</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="164" x="160" y="818.1406"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="170" y="839.2793">moveFileSessionToTmp</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="91" x="468" y="197.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="71" x="478" y="219.0762">beforeSave</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="136" x="445.5" y="251.9063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="455.5" y="273.0449">deleteExistingFiles</text><polygon fill="#FEFECE" filter="url(#fim86vsywylfz)" points="450,305.875,577,305.875,589,317.875,577,329.875,450,329.875,438,317.875,450,305.875" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="450" y="321.6831">ファイルが同じか違うか?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="22" x="416" y="315.2808">同じ</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="22" x="589" y="315.2808">違う</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="80" x="388" y="339.875"/><line style="stroke:#A80036;stroke-width:1.5;" x1="393" x2="393" y1="339.875" y2="373.8438"/><line style="stroke:#A80036;stroke-width:1.5;" x1="463" x2="463" y1="339.875" y2="373.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="398" y="361.0137">何もしない</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="67" x="565.5" y="339.875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="575.5" y="361.0137">delFiles</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="60" x="569" y="393.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="40" x="579" y="414.9824">delFile</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="116" x="541" y="447.8125"/><line style="stroke:#A80036;stroke-width:1.5;" x1="546" x2="546" y1="447.8125" y2="481.7813"/><line style="stroke:#A80036;stroke-width:1.5;" x1="652" x2="652" y1="447.8125" y2="481.7813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="551" y="468.9512">過去の画像を削除</text><polygon fill="#FEFECE" filter="url(#fim86vsywylfz)" points="513.5,487.7813,525.5,499.7813,513.5,511.7813,501.5,499.7813,513.5,487.7813" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="88" x="469.5" y="531.7813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="68" x="479.5" y="552.9199">deleteFiles</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="171" x="428" y="596.9844"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="151" x="438" y="618.123">deleteFileWhileChecking</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="77" x="475" y="662.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="57" x="485" y="683.3262">saveFiles</text><polygon fill="#FEFECE" filter="url(#fim86vsywylfz)" points="450,731.1563,577,731.1563,589,743.1563,577,755.1563,450,755.1563,438,743.1563,450,731.1563" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="450" y="746.9644">ファイルが同じか違うか?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="22" x="416" y="740.562">同じ</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="22" x="589" y="740.562">違う</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="160" x="334" y="765.1563"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="140" x="344" y="786.2949">saveFileWhileChecking</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="142" x="343" y="834.125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122" x="353" y="855.2637">getUniqueFileName</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="80" x="374" y="903.0938"/><line style="stroke:#A80036;stroke-width:1.5;" x1="379" x2="379" y1="903.0938" y2="937.0625"/><line style="stroke:#A80036;stroke-width:1.5;" x1="449" x2="449" y1="903.0938" y2="937.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="384" y="924.2324">保存しない</text><ellipse cx="414" cy="983.0625" fill="#FFFFFF" filter="url(#fim86vsywylfz)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="414" cy="983.0625" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="70" x="578" y="813.1563"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="588" y="834.2949">saveFile</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="97" x="564.5" y="882.125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="77" x="574.5" y="903.2637">rotateImage</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="94" x="566" y="951.0938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="74" x="576" y="972.2324">copyImages</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="103" x="561.5" y="1014.0625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="571.5" y="1035.2012">getImageSize</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="94" x="566" y="1068.0313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="74" x="576" y="1089.1699">resizeImage</text><polygon fill="#FEFECE" filter="url(#fim86vsywylfz)" points="550,765.1563,676,765.1563,688,777.1563,676,789.1563,550,789.1563,538,777.1563,550,765.1563" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="126" x="550" y="780.9644">saveFileWhileChecking</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="70" x="578" y="1144"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="588" y="1165.1387">saveFile</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="128" x="549" y="1197.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="559" y="1219.1074">getSaveFileName</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="98" x="564" y="1251.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="78" x="574" y="1273.0762">getFileName</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="136" x="545" y="1305.9063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="555" y="1327.0449">getFieldBasename</text><ellipse cx="613" cy="1370.875" fill="#FFFFFF" filter="url(#fim86vsywylfz)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="613" cy="1370.875" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" style="stroke:#A80036;stroke-width:1.5;" width="80" x="766.5" y="585.75"/><line style="stroke:#A80036;stroke-width:1.5;" x1="771.5" x2="771.5" y1="585.75" y2="619.7188"/><line style="stroke:#A80036;stroke-width:1.5;" x1="841.5" x2="841.5" y1="585.75" y2="619.7188"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="776.5" y="606.8887">保存完了後</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="185" x="714" y="650.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="165" x="724" y="672.0918">renameToBasenameFields</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="178" x="717.5" y="719.9219"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="158" x="727.5" y="741.0605">renameToBasenameField</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="136" x="738.5" y="788.8906"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="748.5" y="810.0293">getFieldBasename</text><rect fill="#FEFECE" filter="url(#fim86vsywylfz)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="98" x="757.5" y="857.8594"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="78" x="767.5" y="878.998">getFileName</text><ellipse cx="806.5" cy="937.8281" fill="#FFFFFF" filter="url(#fim86vsywylfz)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="806.5" cy="937.8281" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="444" x2="444" y1="30" y2="50"/><polygon fill="#A80036" points="440,40,444,50,448,40,444,44" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="80.5" x2="80.5" y1="747.9063" y2="782.9063"/><polygon fill="#A80036" points="76.5,772.9063,80.5,782.9063,84.5,772.9063,80.5,776.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="242" x2="242" y1="783.1406" y2="818.1406"/><polygon fill="#A80036" points="238,808.1406,242,818.1406,246,808.1406,242,812.1406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="513.5" x2="513.5" y1="231.9063" y2="251.9063"/><polygon fill="#A80036" points="509.5,241.9063,513.5,251.9063,517.5,241.9063,513.5,245.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="599" x2="599" y1="373.8438" y2="393.8438"/><polygon fill="#A80036" points="595,383.8438,599,393.8438,603,383.8438,599,387.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="599" x2="599" y1="427.8125" y2="447.8125"/><polygon fill="#A80036" points="595,437.8125,599,447.8125,603,437.8125,599,441.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="438" x2="428" y1="317.875" y2="317.875"/><line style="stroke:#A80036;stroke-width:1.5;" x1="428" x2="428" y1="317.875" y2="339.875"/><polygon fill="#A80036" points="424,329.875,428,339.875,432,329.875,428,333.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="589" x2="599" y1="317.875" y2="317.875"/><line style="stroke:#A80036;stroke-width:1.5;" x1="599" x2="599" y1="317.875" y2="339.875"/><polygon fill="#A80036" points="595,329.875,599,339.875,603,329.875,599,333.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="428" x2="428" y1="373.8438" y2="499.7813"/><line style="stroke:#A80036;stroke-width:1.5;" x1="428" x2="501.5" y1="499.7813" y2="499.7813"/><polygon fill="#A80036" points="491.5,495.7813,501.5,499.7813,491.5,503.7813,495.5,499.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="599" x2="599" y1="481.7813" y2="499.7813"/><line style="stroke:#A80036;stroke-width:1.5;" x1="599" x2="525.5" y1="499.7813" y2="499.7813"/><polygon fill="#A80036" points="535.5,495.7813,525.5,499.7813,535.5,503.7813,531.5,499.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="513.5" x2="513.5" y1="285.875" y2="305.875"/><polygon fill="#A80036" points="509.5,295.875,513.5,305.875,517.5,295.875,513.5,299.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="513.5" x2="513.5" y1="511.7813" y2="531.7813"/><polygon fill="#A80036" points="509.5,521.7813,513.5,531.7813,517.5,521.7813,513.5,525.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="513.5" x2="513.5" y1="565.75" y2="596.9844"/><polygon fill="#A80036" points="509.5,586.9844,513.5,596.9844,517.5,586.9844,513.5,590.9844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="513.5" x2="513.5" y1="630.9531" y2="662.1875"/><polygon fill="#A80036" points="509.5,652.1875,513.5,662.1875,517.5,652.1875,513.5,656.1875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="414" x2="414" y1="799.125" y2="834.125"/><polygon fill="#A80036" points="410,824.125,414,834.125,418,824.125,414,828.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="414" x2="414" y1="868.0938" y2="903.0938"/><polygon fill="#A80036" points="410,893.0938,414,903.0938,418,893.0938,414,897.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="414" x2="414" y1="937.0625" y2="972.0625"/><polygon fill="#A80036" points="410,962.0625,414,972.0625,418,962.0625,414,966.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="847.125" y2="882.125"/><polygon fill="#A80036" points="609,872.125,613,882.125,617,872.125,613,876.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="916.0938" y2="951.0938"/><polygon fill="#A80036" points="609,941.0938,613,951.0938,617,941.0938,613,945.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="985.0625" y2="1014.0625"/><polygon fill="#A80036" points="609,1004.0625,613,1014.0625,617,1004.0625,613,1008.0625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="1048.0313" y2="1068.0313"/><polygon fill="#A80036" points="609,1058.0313,613,1068.0313,617,1058.0313,613,1062.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="789.1563" y2="813.1563"/><polygon fill="#A80036" points="609,803.1563,613,813.1563,617,803.1563,613,807.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="1102" y2="1112"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="700" y1="1112" y2="1112"/><polygon fill="#A80036" points="696,966.0781,700,956.0781,704,966.0781,700,962.0781" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="700" x2="700" y1="777.1563" y2="1112"/><line style="stroke:#A80036;stroke-width:1.5;" x1="700" x2="688" y1="777.1563" y2="777.1563"/><polygon fill="#A80036" points="698,773.1563,688,777.1563,698,781.1563,694,777.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="538" x2="526" y1="777.1563" y2="777.1563"/><polygon fill="#A80036" points="522,952.0781,526,962.0781,530,952.0781,526,956.0781" style="stroke:#A80036;stroke-width:1.5;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="526" x2="526" y1="777.1563" y2="1124"/><line style="stroke:#A80036;stroke-width:1.5;" x1="526" x2="613" y1="1124" y2="1124"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="1124" y2="1144"/><polygon fill="#A80036" points="609,1134,613,1144,617,1134,613,1138" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="1177.9688" y2="1197.9688"/><polygon fill="#A80036" points="609,1187.9688,613,1197.9688,617,1187.9688,613,1191.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="1231.9375" y2="1251.9375"/><polygon fill="#A80036" points="609,1241.9375,613,1251.9375,617,1241.9375,613,1245.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="1285.9063" y2="1305.9063"/><polygon fill="#A80036" points="609,1295.9063,613,1305.9063,617,1295.9063,613,1299.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="1339.875" y2="1359.875"/><polygon fill="#A80036" points="609,1349.875,613,1359.875,617,1349.875,613,1353.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="438" x2="414" y1="743.1563" y2="743.1563"/><line style="stroke:#A80036;stroke-width:1.5;" x1="414" x2="414" y1="743.1563" y2="765.1563"/><polygon fill="#A80036" points="410,755.1563,414,765.1563,418,755.1563,414,759.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="589" x2="613" y1="743.1563" y2="743.1563"/><line style="stroke:#A80036;stroke-width:1.5;" x1="613" x2="613" y1="743.1563" y2="765.1563"/><polygon fill="#A80036" points="609,755.1563,613,765.1563,617,755.1563,613,759.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="513.5" x2="513.5" y1="696.1563" y2="731.1563"/><polygon fill="#A80036" points="509.5,721.1563,513.5,731.1563,517.5,721.1563,513.5,725.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="242" x2="242" y1="179.4375" y2="749.1719"/><polygon fill="#A80036" points="238,739.1719,242,749.1719,246,739.1719,242,743.1719" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="513.5" x2="513.5" y1="179.4375" y2="197.9375"/><polygon fill="#A80036" points="509.5,187.9375,513.5,197.9375,517.5,187.9375,513.5,191.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="421" x2="421" y1="157.9375" y2="177.9375"/><polygon fill="#A80036" points="417,167.9375,421,177.9375,425,167.9375,421,171.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="806.5" x2="806.5" y1="619.7188" y2="650.9531"/><polygon fill="#A80036" points="802.5,640.9531,806.5,650.9531,810.5,640.9531,806.5,644.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="806.5" x2="806.5" y1="684.9219" y2="719.9219"/><polygon fill="#A80036" points="802.5,709.9219,806.5,719.9219,810.5,709.9219,806.5,713.9219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="806.5" x2="806.5" y1="753.8906" y2="788.8906"/><polygon fill="#A80036" points="802.5,778.8906,806.5,788.8906,810.5,778.8906,806.5,782.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="806.5" x2="806.5" y1="822.8594" y2="857.8594"/><polygon fill="#A80036" points="802.5,847.8594,806.5,857.8594,810.5,847.8594,806.5,851.8594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="806.5" x2="806.5" y1="891.8281" y2="926.8281"/><polygon fill="#A80036" points="802.5,916.8281,806.5,926.8281,810.5,916.8281,806.5,920.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="80.5" x2="80.5" y1="105.4688" y2="713.9375"/><polygon fill="#A80036" points="76.5,703.9375,80.5,713.9375,84.5,703.9375,80.5,707.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="421" x2="421" y1="105.4688" y2="123.9688"/><polygon fill="#A80036" points="417,113.9688,421,123.9688,425,113.9688,421,117.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="806.5" x2="806.5" y1="105.4688" y2="585.75"/><polygon fill="#A80036" points="802.5,575.75,806.5,585.75,810.5,575.75,806.5,579.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="444" x2="444" y1="83.9688" y2="103.9688"/><polygon fill="#A80036" points="440,93.9688,444,103.9688,448,93.9688,444,97.9688" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1a1d3878b3a49c37a36258987320ba1d]
@startuml

start
:initialize;
split
    :getExistsCheckDirs;
    :getSaveDir;
    detach
split again
    :beforeMarshal;
    split
        :setUpRquestData;
        :moveFileSessionToTmp;
        detach
    split again
        :beforeSave;
        :deleteExistingFiles;
        if (ファイルが同じか違うか?) then (同じ)
            :何もしない|
        else (違う)
            :delFiles;
            :delFile;
            :過去の画像を削除|
        endif
    :deleteFiles;
    :deleteFileWhileChecking;
    :saveFiles;
        if (ファイルが同じか違うか?) then (同じ)
            :saveFileWhileChecking;
            :getUniqueFileName;
            :保存しない|
            stop
        else (違う)
            while (saveFileWhileChecking)
                :saveFile;
                :rotateImage;
                :copyImages;
                :getImageSize;
                :resizeImage;
            end while
                :saveFile;
                :getSaveFileName;
                :getFileName;
                :getFieldBasename;
                stop
        endif
    end split
split again
    :保存完了後|
    :renameToBasenameFields;
    :renameToBasenameField;
    :getFieldBasename;
    :getFileName;
    stop
end split

@enduml

PlantUML version 1.2021.14(Sat Nov 13 00:46:50 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>