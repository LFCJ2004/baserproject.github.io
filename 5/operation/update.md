# バージョンアップガイド

baserCMSは、定期的なアップデートを行っており、日々、進化しています。
baserCMS５よりオートアップデート機能も入り、バージョンアップは簡単に行えますので、セキュリティに関するアップデートが発生したら積極的にバージョンアップを行いましょう。

## バージョン番号
バージョン番号は、baserCMSの仕様を特定する重要な番号です。
インストールされたbaserCMSにおいてバージョン番号は、管理システムの `設定 > ユーティリティ > 環境情報` より確認できます。

また、ソースコードにおいては、`/plugins/baser-core/VERSION.txt` の１行目に明記されています。

## バージョン番号の意味

バージョン番号は、ドット（.）で区切った３つの数字にて表現され、リリース時に番号を変更してリリースします。

```shell
 [メジャー.マイナー.パッチ]
 
 （例）3.0.7
```

### メジャーアップデート
アーキテクチャの変更や、管理画面の大幅なリニューアル、及び、下位互換性が全くなくなるようなリリースは、メジャーアップデートとし、一番左の番号をインクリメントし、真ん中、右の番号を
0 にリセットします。

メジャーアップデートの場合は、オートアップデートは対応していません。

```shell
（例）5.12.2　→　6.0.0
```

### マイナーアップデート
新機能の追加、仕様変更において、テーブル構造の変更を伴うような少し大きめの改善を入れたリリースは、マイナーアップデートとし、真ん中の番号をインクリメントし、一番右の番号を
0 にリセットします。

```shell
（例）5.12.2　→　5.13.0
```


### パッチアップデート
バグフィックスや、セキュリティフィックス等、メジャー及びマイナーに該当しない細かな機能修正等を行ったリリースは、パッチアップデートとし、一番右の番号をインクリメントします。

```shell
（例）5.12.2　→　5.12.3
```

## アップデートの実行
baserCMS本体のバージョンアップは [オートアップデート](../ver5_tour#オートアップデート) を参考にしてください。

## アップデートで実行されていること
baserCMS本体のバージョンアップは [オートアップデート](../ver5_tour#オートアップデート) で自動で行えますが内部的に次のような処理を行っています。

### プログラムの更新
Composer という構成管理の仕組みを利用してプログラムを最新版に置き換えます。

### データベースの更新
マイグレーションという仕組みを利用してデータベースの構造変更が必要な場合、最新の構造に変更します。

### アップデートスクリプトの実行
その他、ファイルの操作や、データベースのデータの変更が必要な場合は、別途処理を実行します。


## メジャーバージョンのバージョンアップ方法
メジャーバージョンアップ時は、基本的に後方互換がなく、手動の作業が必要となる場合がほとんどです。
公式が提供している記事等を参考にしましょう。

なお、メジャーバージョンをバージョンアップするには、事前に現在のメジャーバージョンの最新版にバージョンアップしておく必要があります。

※ 2023/05/02 現在、baserCMS４からbaserCMS５へのバージョンアップ情報は公式より案内されていません。後日、案内する予定ですが、日程が決まっていません。バージョンアップを実施したい場合は、[baserCMSのオフィシャルパートナー](https://basercms.net/partners/){:target="_blank"} に相談しましょう。

## プラグインのバージョンアップ
baserCMSに初期状態でインストールされている「コアプラグイン」については、baserCMS本体のバージョンと一緒に管理されていますが、それ以外のプラグインについては個別にバージョンアップが必要となります。

なお、2023/05/02 現在、外部プラグインはオートアップデートに対応しておらず、手動でプログラムを上書きする形で配置する必要があります。

配置した際、管理システムのプラグイン管理を開くと、バージョンアップボタンが表示されているはずですので、クリックしてバージョンアップを実行します。

